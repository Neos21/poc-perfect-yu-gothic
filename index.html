<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="ls7kuvIKSqVa_dcixqKvFwl393swvYMkHCkG-xtlCj0">
    <title>PoC : Perfect Yu Gothic</title>
    <link rel="icon" href="https://neos21.github.io/favicon.ico">
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LP3ZQV2R3M"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-LP3ZQV2R3M');gtag('config','UA-106501-6');</script>
    <!-- Google AdSense -->
    <script data-ad-client="ca-pub-6475907504235292" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <style>

/* ===== Fonts ===== */

/* Perfect Yu Gothic */
@font-face { font-family: "Yu Gothic"; src: local("Yu Gothic Medium"), local("YuGothic-Medium"); }
@font-face { font-family: "Yu Gothic"; src: local("Yu Gothic Bold")  , local("YuGothic-Bold")  ; font-weight: bold; }

/* Sans Serif Font */
body {
  font-family: YuGothic, "Yu Gothic", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

/* Monospace Font */
pre, code, time {
  font-family: "Noto Sans Mono CJK JP", Osaka-mono, "MS Gothic", Menlo, Consolas, Courier, "Courier New", monospace, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

/* ===== Styles ===== */

body {
  margin: 0 1rem 2rem;
  line-height: 1.7;
}

a {
  color: #06f;
}

a:hover {
  color: #09f;
}

dt {
  font-weight: bold;
}

pre {
  border: 1px solid #d2d4d6;
  border-radius: 4px;
  padding: 1em;
  overflow-x: scroll;
}

code {
  border: 1px solid #d2d4d6;
  border-radius: 4px;
  padding: .1rem .4rem;
  font-size: .95em;
  background: #f2f4f6;
}

strong {
  color: #f00;
}

/* ===== Sections ===== */

body > section {
  margin: 0 auto;
  max-width: 70rem;
}

h2, h3 {
  margin: 1.75em 0 1rem;
}

body > section > section > section {
  border-left: 5px solid #d2d4d6;
  padding-left: 1rem;
}

    </style>
  </head>
  <body>

<section id="perfect-yu-gothic">
  <h1>PoC : Perfect Yu Gothic</h1>
  <p>Windows 游ゴシックを綺麗に表示するための試験場。</p>
  <ul>
    <li>初版作成日 : <time>2020-01-17</time></li>
    <li>最終更新日 : <time>2020-01-17</time></li>
  </ul>
  
  <section id="table-of-contents">
    <h2>Table of Contents</h2>
    <ul>
      <li><a href="#testing-pages">検証ページ</a></li>
      <li><a href="#problem">游ゴシックフォントに関する問題まとめ</a></li>
      <li><strong><a href="#best-answer">現時点の最善の対策法 (<time>2020-01-17</time> 時点)</a></strong></li>
      <li><a href="#other-answers">副作用がある他の対策</a></li>
      <li><a href="#client-side">クライアントサイドでできる対策</a></li>
      <li><a href="#old-info">過去情報</a></li>
      <li><a href="#miscarry">「游ゴシック Medium」を諦める案</a></li>
      <li><a href="#links">Links</a></li>
    </ul>
  </section>
  
  <section id="testing-pages">
    <h2>検証ページ</h2>
    <dl>
      <dt><a href="testing-01.html">Testing 01</a> (初版 <time>2020-01-17</time>・最終 <time>2020-01-17</time>)</dt>
      <dd>
        <p>Full Name や PostScript 名を、<code>@font-face</code> で指定してみたり、<code>font-family</code> で直接指定してみたりした。<code>@font-face</code> 指定が上手く効くようになっていた。</p>
      </dd>
      <dt><a href="testing-02.html">Testing 02</a> (初版 <time>2020-01-17</time>・最終 <time>2020-01-17</time>)</dt>
      <dd>
        <p><code>@font-face</code> 指定の詳細チェック。「簡素版」でも「詳細版」でも同じ結果が得られることが確認できた。</p>
      </dd>
    </dl>
  </section>
  
  <section id="problem">
    <h2>游ゴシックフォントに関する問題まとめ</h2>
    <ul>
      <li>iOS・Android : 游ゴシックフォントが標準搭載されていないので対象外。</li>
      <li>
        MacOS : 「游ゴシック体 Medium」「游ゴシック体 Bold」のみが標準搭載されており、<code>font-family: YuGothic</code> (「游ゴシック体」) を指定するだけで游ゴシックが綺麗に表示される。対策不要。
        <ul>
          <li>MacOS 向けの <code>font-family</code> の指定値は <code>YuGothic, &quot;游ゴシック体&quot;</code> で、Windows 向けの指定値 <code>&quot;Yu Gothic&quot;, &quot;游ゴシック&quot;</code> とは異なる点に留意。</li>
          <li>MacOS には、Windows でフォントがかすれる原因となる「Regular」ウェイトが搭載されていないので問題が起こらない。</li>
        </ul>
      </li>
      <li>
        Windows : 単純に <code>font-family: &quot;Yu Gothic&quot;</code> (「游ゴシック」) と指定すると、<strong>「游ゴシック Regular」</strong>という細いウェイトが適用されてしまい、游ゴシックが薄く・かすれて表示されてしまう。
        <ul>
          <li>特に、Chromium ベースのブラウザ (Chrome や Chromium Edge) で「游ゴシック Regular」が適用されると、Firefox などよりも薄く表示されてしまいがち。</li>
          <li>フォントのウェイトの違いの他に、MacOS と Windows とでガンマ補正の仕組みが異なるため、同じ Medium ウェイトを指定したとしても、MacOS より Windows の方が薄く表示されがちではある。</li>
        </ul>
      </li>
    </ul>
    <p><strong>なんとかして Windows で「游ゴシック Regular」ではなく「游ゴシック Medium」を適用し</strong>、その他の OS やフォントで表示された時には悪影響を与えないよう対応したい、というのが主目的。</p>
  </section>
  
  <section id="best-answer">
    <h2>現時点の最善の対策法 (<time>2020-01-17</time> 時点)</h2>
    <p><strong><code>@font-face</code> の <code>local()</code> で Windows 向けの Full Name や PostScript 名を定義してやると、游ゴシック Medium が適用できる。</strong>適用の仕方にはいくつかのバリエーションがある。</p>
    <ul>
      <li>
        <code>@font-face</code> で定義するフォント名 :
        <ol>
          <li>通常と同じ <code>&quot;Yu Gothic&quot;</code> を使用する → <code>font-family: &quot;Yu Gothic&quot;</code> と実装した箇所を上書きする形で Medium ウェイトを適用できる。Polyfill 的な挙動になるので、クライアントサイドでの対策ではこのやり方を取ると良いが、もし今後 <code>@font-face</code> 指定が無効になった場合に、Regular ウェイトが適用されてしまう恐れが出てくる。</li>
          <li>オリジナルの <code>font-family</code> を定義する → 今後もし <code>@font-face</code> 指定が効かなくなった際に、Regular ウェイトがフォールバックで利用されないよう、CSS を調整しやすくなる。</li>
        </ol>
      </li>
      <li>
        <code>local()</code> に指定する名称 :
        <ol>
          <li>Windows 向け Full Name のみ記載する → 本稿執筆時点ではコレでも問題なし</li>
          <li>Windows 向け PostScript 名のみ記載する → 本稿執筆時点ではコレでも問題なし・実装のバイト数としては「Full Name のみ記載」よりもわずかに小さく実装できるので、極力ファイルサイズをケチりたい場合用？</li>
          <li>Windows 向け Full Name と Windows 向け PostScript 名を併記する → 本稿執筆時点で有効な指定を2つ備えるので一番確実</li>
          <li>(MacOS 向け Full Name や PostScript 名も併記する) → MacOS は <code>font-family: YuGothic</code> 指定のみで問題なく、Windows では認識しない指定になるので、実装するだけ無駄</li>
        </ol>
      </li>
      <li>
        <code>font-weight</code> の指定方法 :
        <ol>
          <li>簡素版 : <code>font-weight</code> なし = Medium、<code>font-weight: bold</code> = Bold と、2つの <code>@font-face</code> で実装する → 実装量が少なく、「詳細版」と変わらない結果を得られる</li>
          <li>詳細版 : <code>font-weight</code> 100 ～ 900 まで9段階の <code>@font-face</code> を実装する → 実装量が多いが、Bold に切り替わるウェイトを自分で調整できる他、精緻な設定で堅牢か</li>
        </ol>
      </li>
    </ul>
    <p>…文章だけで説明しても分かりにくいと思うので、以下にいくつかのバリエーションを提供する。<strong>以下のいずれのコードでも、本稿執筆時点では游ゴシック Medium が適用できる</strong>ので、お好みに応じてどのやり方を選んでもらっても良い。</p>
    <ol>
      <li>
        通常の <code>&quot;Yu Gothic&quot;</code> を上書きする <code>@font-face</code> を定義する。ウェイト別の定義は2つのみの簡素な書き方 → もし今後 <code>@font-face</code> の内容が無視されるようになった場合、Regular ウェイトで表示されてしまう恐れがある
        <pre>@font-face { font-family: &quot;Yu Gothic&quot;; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;); }
@font-face { font-family: &quot;Yu Gothic&quot;; src: local(&quot;Yu Gothic Bold&quot;), local(&quot;YuGothic-Bold&quot;); font-weight: bold; }
body { font-family: YuGothic, &quot;Yu Gothic&quot;, sans-serif; }</pre>
      </li>
      <li>
        オリジナルの <code>font-family</code> を定義する。ウェイト別の定義は2つのみの簡素版 → <code>@font-face</code> の内容が無視された場合は、その後ろの <code>Meiryo</code> (メイリオ) がフォールバックで適用されるように実装している
        <pre>@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;); }
@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Bold&quot;)  , local(&quot;YuGothic-Bold&quot;)  ; font-weight: bold; }
body { font-family: YuGothic, &quot;Original Yu Gothic&quot;, Meiryo, sans-serif; }</pre>
      </li>
      <li>
        オリジナルの <code>font-family</code> を定義する。ウェイト別の定義は9段階に分けた詳細版 → 現状「2.」と同じ結果を得られるが、一番堅牢な実装といえる
        <pre>@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;); font-weight: 100; }
@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;); font-weight: 200; }
@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;); font-weight: 300; }
@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;); font-weight: 400; }
@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;); font-weight: 500; }
@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Bold&quot;)  , local(&quot;YuGothic-Bold&quot;)  ; font-weight: 600; }
@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Bold&quot;)  , local(&quot;YuGothic-Bold&quot;)  ; font-weight: 700; }
@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Bold&quot;)  , local(&quot;YuGothic-Bold&quot;)  ; font-weight: 800; }
@font-face { font-family: &quot;Original Yu Gothic&quot;; src: local(&quot;Yu Gothic Bold&quot;)  , local(&quot;YuGothic-Bold&quot;)  ; font-weight: 900; }
body { font-family: YuGothic, &quot;Original Yu Gothic&quot;, sans-serif; }</pre>
    </ul>
  </section>
  
  <section id="other-answers">
    <h2>副作用がある他の対策</h2>
    
    <section>
      <h3>1. <code>font-family: &quot;Yu Gothic Medium&quot;</code> を指定する → 太字表示する際に「游ゴシック Bold」が使用されない</h3>
      <p><code>font-family: &quot;Yu Gothic Medium&quot;;</code></p>
      <p>と指定すると、Windows の次のブラウザ (本稿執筆時点での最新版) で、「游ゴシック Medium」が表示された。</p>
      <ul>
        <li>Chrome v79</li>
        <li>Chromium Edge v79</li>
        <li>Firefox v72</li>
      </ul>
      <p><strong>IE v11 ではこの指定が効かない</strong>のと、この <code>font-family</code> と同時に <code>font-weight: bold</code> が指定されると、「游ゴシック Bold」ではなく<strong>太字に加工された「游ゴシック Medium」</strong>が適用されてしまい、若干汚く表示されてしまうのが問題。</p>
      <p>IE v11 を無視し、太字化された「游ゴシック Medium」で表示されることを許容するならば利用できる対策。</p>
      <p>もしくは、太字にする要素にのみ <code>font-family: &quot;Yu Gothic Bold&quot;</code> を別途当てることでも対応できる。</p>
    </section>
    
    <section>
      <h3>2. <code>font-weight: 500</code> を指定する → 「ヒラギノ角ゴ」適用時に悪影響</h3>
      <p><code>font-family: &quot;Yu Gothic&quot;; font-weight: 500;</code></p>
      <p>と指定すると「游ゴシック Medium」が適用されるようになる。この挙動自体は本稿執筆時点の主要ブラウザでも再現する。</p>
      <p>大抵は <code>font-family</code> に他のフォントもフォールバックとして記載するが、その際「ヒラギノ角ゴ (Hiragino Kaku Gothic ProN)」が適用されると、通常の文字が太字で表示されてしまう、という悪影響がある。</p>
      <ul>
        <li>参考 : <a href="https://neos21.hatenablog.com/entry/2016/02/12/081447">Corredor - Windows で游ゴシックが細く見えないようにする CSS</a></li>
      </ul>
    </section>
  </section>
  
  <section id="client-side">
    <h2>クライアントサイドでできる対策</h2>
    <p>Web ページの閲覧者の PC でできる対策。</p>
    
    <section>
      <h3>1. ユーザスタイルシートで <code>@font-face</code> を加工する</h3>
      <p><strong>Stylish</strong> などのブラウザ拡張機能を使用し、ユーザスタイルシートを追加する。</p>
      <p>「<a href="#best-answer">現時点の最善の対策法</a>」で紹介しているコードをベースに、<code>&quot;Yu Gothic&quot;, &quot;游ゴシック&quot;</code> などのフォント定義に対して <code>@font-face</code> を被せ、Medium ウェイトが適用されるようにする。</p>
      <pre>@font-face { font-family: &quot;Yu Gothic&quot;        ; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;);                    }
@font-face { font-family: &quot;Yu Gothic&quot;        ; src: local(&quot;Yu Gothic Bold&quot;)  , local(&quot;YuGothic-Bold&quot;)  ; font-weight: bold; }
@font-face { font-family: &quot;Yu Gothic Medium&quot; ; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;);                    }
@font-face { font-family: &quot;Yu Gothic Medium&quot; ; src: local(&quot;Yu Gothic Bold&quot;)  , local(&quot;YuGothic-Bold&quot;)  ; font-weight: bold; }
@font-face { font-family: &quot;游ゴシック&quot;       ; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;);                    }
@font-face { font-family: &quot;游ゴシック&quot;       ; src: local(&quot;Yu Gothic Bold&quot;)  , local(&quot;YuGothic-Bold&quot;)  ; font-weight: bold; }
@font-face { font-family: &quot;游ゴシック Medium&quot;; src: local(&quot;Yu Gothic Medium&quot;), local(&quot;YuGothic-Medium&quot;);                    }
@font-face { font-family: &quot;游ゴシック Medium&quot;; src: local(&quot;Yu Gothic Bold&quot;)  , local(&quot;YuGothic-Bold&quot;)  ; font-weight: bold; }</pre>
      <ul>
        <li>参考 : <a href="https://neos21.hatenablog.com/entry/2018/01/15/080000">Corredor - Firefox の Stylish でできるオススメフォント設定</a> … この記事を書いた時点では、<code>@font-face</code> 指定が Chrome で効かず、Firefox のみのテクニックだったが、Chrome v79 ではこの指定が効くようになっていた。</li>
      </ul>
    </section>
    
    <section>
      <h3>2. ユーザスタイルシートで <code>-webkit-text-stroke-width</code> を適用する</h3>
      <p><strong>Stylish</strong> などのブラウザ拡張機能を使用し、ユーザスタイルシートを追加する。</p>
      <p><code>-webkit-text-stroke-width</code> プロパティを使用すると、テキストを太く見せられるようになる。游ゴシック以外のフォントにも適用されるため、相性の悪いフォントは滲んで見える場合があるが、「Medium ウェイトでも細く見える」のを解消するには唯一の策。「案 1.」と併用しても良い。</p>
      <p><code>* { -webkit-text-stroke-width: .4px !important; }</code></p>
      <p>対応しているのは Chrome、Chromium Edge、Firefox。</p>
      <p>IE はこのプロパティが効かないので、代わりに以下の <code>text-shadow</code> プロパティを使うと良い。ただし、色付きの文字が若干滲んで表示されてしまう。</p>
      <p><code>* { text-shadow: transparent 0 0 0, rgba(0, 0, 0, 0.68) 0 0 0 !important; }</code></p>
      <ul>
        <li>参考 : <a href="https://neos21.hatenablog.com/entry/2019/01/05/000629#Chrome-%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD%E3%81%A7--webkit-text-stroke-width-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B">Corredor - Chrome 拡張機能で -webkit-text-stroke-width を指定する</a></li>
        <li>参考 : <a href="https://neos21.hatenablog.com/entry/2019/01/27/220527#text-shadow-%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F--webkit-text-stroke-width-%E3%82%92%E4%BD%BF%E3%81%86">Corredor - text-shadow ではなく -webkit-text-stroke-width を使う</a></li>
      </ul>
    </section>
    
    <section>
      <h3>3. レジストリを書き換えて游ゴシック Regular・Light を Medium 化する</h3>
      <p>Windows は「フォント名」と「読み込むフォントファイル」の組み合わせを、レジストリで管理している。コレを書き換えることで、「游ゴシック Regular」や「游ゴシック Light」フォントが選択されても、Medium ウェイトのフォントファイルを読み込ませるようにする。</p>
      <ul>
        <li>参考 : <a href="https://neos21.hatenablog.com/entry/2019/01/05/000629#%E3%83%AC%E3%82%B8%E3%82%B9%E3%83%88%E3%83%AA%E3%82%92%E3%82%A4%E3%82%B8%E3%81%A3%E3%81%A6-RegularLight-%E3%82%A6%E3%82%A7%E3%82%A4%E3%83%88%E3%81%AE%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%82%92-Medium-%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%81%AB%E7%BD%AE%E6%8F%9B%E3%81%99%E3%82%8B">Corredor - レジストリをイジって Regular・Light ウェイトのフォントを Medium フォントに置換する</a> … 手作業での差し替え手順を紹介。</li>
        <li>参考 : <a href="https://neos21.hatenablog.com/entry/2019/02/24/080000">Corredor - Windows の游ゴシック Regular・Light を Medium フォントに差し替えて太く見せる VBScript</a> … VBScript でフォントの差し替えを自動化した。</li>
      </ul>
    </section>
    
    <section>
      <h3>4. (Firefox のみ) <code>about: config</code> で設定変更する</h3>
      <p>Gecko ベースの Firefox では、<code>about: config</code> より各種設定を変更することで、フォントをより太く表示させられる。詳細は以下記事。</p>
      <ul>
        <li>参考 : <a href="https://neos21.hatenablog.com/entry/2018/02/13/080000">Corredor - Windows の Firefox でフォントが汚かったので直した</a></li>
      </ul>
    </section>
  </section>
  
  <section id="old-info">
    <h2>過去情報</h2>
    <p>本稿執筆時点の最新ブラウザでは確認できなくなった、過去の症状など。</p>
    <ol>
      <li>英語のフォント名ではダメで、日本語のフォント名でないと認識しないブラウザがあったりした → 本稿執筆時点では<strong>英語のフォント名のみ記載すれば OK</strong>。ただし、フォントの Full Name を認識するか、PostScript 名を認識するかはブラウザによって異なる。</li>
      <li>以前の Chrome では <code>@font-face</code> 指定が効かなくなっていた → 本稿執筆時点の最新版である Chrome v79 では動作するように戻っていた。</li>
    </ol>
    <ul>
      <li>参考 : <a href="https://neos21.hatenablog.com/entry/2017/11/12/080000">Corredor - 2018年以降はコレで決まり！Web サイトで指定するゴシック体・明朝体・等幅の font-family 設定</a> … 2017-11-12 時点の検証結果もろもろ。</li>
      <li>参考 : <a href="https://neos21.hatenablog.com/entry/2019/01/05/000629">Corredor - ウェブサイトに適用する游ゴシックフォントを見直しまくった最終解</a> … 2019-01-15 時点の検証結果もろもろ。</li>
    </ul>
    
    <section>
      <h3>過去にクライアントサイドでできた対策</h3>
      <ol>
        <li>「<a href="https://neos21.hatenablog.com/entry/2018/02/14/080000">MacType</a>」というフリーソフトでフォントにアンチエイリアスをかけられた → 本稿執筆時点の主要ブラウザ (Chrome・Chromium Edge・Firefox・IE) ではページのテキストに MacType が適用されなくなっている。</li>
      </ol>
    </section>
  </section>
  
  <section id="miscarry">
    <h2>「游ゴシック Medium」を諦める案</h2>
    <ol>
      <li><code>font-family: &quot;Yu Gothic&quot;</code> を指定し、<strong>Regular ウェイトが使用されることを許容する。</strong></li>
      <li>游ゴシックの指定をなくし、<code>Meiryo</code> や他の Web フォントなどを使用する。</li>
    </ol>
  </section>
  
  <section id="links">
    <h2>Links</h2>
    <ul>
      <li><a href="https://neos21.net/">Neo's World</a></li>
      <li><a href="https://github.com/Neos21">GitHub - Neos21</a></li>
      <li><a href="https://github.com/Neos21/poc-perfect-yu-gothic">GitHub - PoC : Perfect Yu Gothic</a></li>
    </ul>
  </section>
</section>

  </body>
</html>
